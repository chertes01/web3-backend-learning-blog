# ğŸ§  Go åˆ‡ç‰‡ï¼ˆSliceï¼‰å­¦ä¹ ç¬”è®°

---

## ä¸€ã€åˆ‡ç‰‡çš„åŸºæœ¬æ¦‚å¿µ

- åˆ‡ç‰‡ï¼ˆSliceï¼‰æ˜¯åŸºäºæ•°ç»„çš„**åŠ¨æ€è§†å›¾**ï¼Œå¯æ‰©å®¹ã€æˆªå–å’Œä¿®æ”¹å…ƒç´ ã€‚
- ä¸æ•°ç»„ä¸åŒï¼Œåˆ‡ç‰‡ä¸éœ€è¦æŒ‡å®šå›ºå®šé•¿åº¦ã€‚

```go
s := []int{1, 2, 3}   // å®šä¹‰åˆ‡ç‰‡
a := [3]int{1, 2, 3}  // å®šä¹‰æ•°ç»„
```

- æ•°ç»„ï¼šå›ºå®šé•¿åº¦ `[3]int`
- åˆ‡ç‰‡ï¼šåŠ¨æ€é•¿åº¦ `[]int`

åˆ‡ç‰‡åº•å±‚ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š
- æŒ‡é’ˆï¼šæŒ‡å‘åº•å±‚æ•°ç»„ä¸­çš„æŸä¸ªä½ç½®
- é•¿åº¦ï¼ˆlenï¼‰ï¼šåˆ‡ç‰‡ä¸­å…ƒç´ ä¸ªæ•°
- å®¹é‡ï¼ˆcapï¼‰ï¼šä»åˆ‡ç‰‡èµ·å§‹ä½ç½®åˆ°åº•å±‚æ•°ç»„æœ«å°¾çš„å¤§å°

---

## äºŒã€åˆ‡ç‰‡çš„åˆ›å»ºæ–¹å¼

1. **å­—é¢é‡åˆ›å»º**
    ```go
    slice1 := []int{1, 2, 3, 4}
    ```
2. **ä½¿ç”¨ make()**
    ```go
    slice2 := make([]int, 4, 5)
    // len = 4ï¼Œcap = 5
    ```
3. **ä»æ•°ç»„åˆ‡å‰²**
    ```go
    array := [...]string{"zero", "one", "two", "three", "four", "five", "six"}
    slice3 := array[3:7]
    // slice3 = [three four five six]
    // len(slice3) = 4, cap(slice3) = 4
    ```

---

## ä¸‰ã€é•¿åº¦ä¸å®¹é‡

- `len`ï¼šå½“å‰åˆ‡ç‰‡å¯è®¿é—®å…ƒç´ æ•°é‡
- `cap`ï¼šä»èµ·å§‹ä½ç½®åˆ°åº•å±‚æ•°ç»„æœ«å°¾çš„å¯ç”¨ç©ºé—´

```go
fmt.Printf("slice1:%v ,length:%d ,capacity:%d\n", slice1, len(slice1), cap(slice1))
```

åˆ‡ç‰‡åœ¨åº•å±‚å…±äº«åŒä¸€ä¸ªæ•°ç»„ï¼Œ`len` åªæ˜¯è§†å›¾å¤§å°ï¼Œ`cap` å†³å®šæ˜¯å¦èƒ½ç»§ç»­è¿½åŠ ã€‚

---

## å››ã€è®¿é—®ä¸ä¿®æ”¹åˆ‡ç‰‡

```go
s1 := []int{5, 4, 3, 2, 1}
fmt.Println("s1:", s1[:3]) // [5 4 3]
s1 = append([]int{10, 9, 8}, s1[3:]...)
fmt.Println("s1 after modification:", s1) // [10 9 8 2 1]
```

- `s1[:3]` å–å‰3ä¸ªå…ƒç´ 
- `append([]int{10, 9, 8}, s1[3:]...)` åœ¨å‰é¢æ’å…¥æ–°å…ƒç´ 

---

## äº”ã€åˆ‡ç‰‡éå†

```go
for v := range s {
    fmt.Println(v, s[v])
}
```
- `range` è¿”å›ç´¢å¼•ï¼Œ`s[v]` è¿”å›å€¼

---

## å…­ã€nil åˆ‡ç‰‡ vs ç©ºåˆ‡ç‰‡

```go
var nilSlice []int // nil åˆ‡ç‰‡
s3 := []int{}      // ç©ºåˆ‡ç‰‡
```

| ç±»å‹     | len | cap | æ˜¯å¦ä¸º nil | å†…å­˜åˆ†é…      |
|----------|-----|-----|------------|---------------|
| nil åˆ‡ç‰‡ |  0  |  0  | âœ… æ˜¯      | âŒ æ— åº•å±‚æ•°ç»„ |
| ç©ºåˆ‡ç‰‡   |  0  |  0  | âŒ å¦      | âœ… æœ‰åº•å±‚æ•°ç»„ |

```go
fmt.Println(nilSlice == nil) // true
fmt.Println(s3 == nil)       // false
```

---

## ä¸ƒã€append çš„ä½¿ç”¨ä¸æ‰©å®¹æœºåˆ¶

```go
s := []string{}
s = append(s, "hello")
s = append(s, "world", "wellcome")
s = append(s[:3], []string{"to", "go", "language"}...)
```

- append ä¼šåœ¨å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨æ‰©å®¹
- æ‰©å®¹è§„åˆ™ï¼š
    - å®¹é‡ < 1024 æ—¶ï¼Œå¤§è‡´ç¿»å€
    - å®¹é‡ â‰¥ 1024 æ—¶ï¼Œæ¯æ¬¡å¢åŠ  25%
- æ‰©å®¹åä¼šåˆ†é…æ–°åº•å±‚æ•°ç»„å¹¶ copy åŸå†…å®¹

---

## å…«ã€æ’å…¥ä¸åˆ é™¤æ“ä½œ

**æ’å…¥å…ƒç´ ï¼š**
```go
s5 := array[0:7]
s5 = append(s5[0:2], append([]string{"3"}, s5[2:7]...)...)
fmt.Println(s5) // åœ¨ç´¢å¼•2å¤„æ’å…¥"3"
```

**åˆ é™¤å…ƒç´ ï¼š**
```go
s6 := array[0:7]
s6 = append(s6[0:3], s6[4:7]...)
fmt.Println(s6) // åˆ é™¤ç´¢å¼•3çš„å…ƒç´ 
```

---

## ä¹ã€copy å‡½æ•°

```go
src := []int{1, 2, 3, 4}
dst := make([]int, 2)
copy(dst, src)
```
- åªå¤åˆ¶å‰ `len(dst)` ä¸ªå…ƒç´ 
- ä¿®æ”¹ dst ä¸å½±å“ src
- è‹¥ä¸¤è€…å…±äº«åº•å±‚æ•°ç»„ï¼ˆå¦‚ `dst = src[1:3]`ï¼‰ï¼Œä¿®æ”¹ä¼šäº’ç›¸å½±å“

---

## åã€æ‰©å®¹ä¸å…±äº«æ³¨æ„ç‚¹

- append æœ‰æ—¶ä¼šè¿”å›æ–°çš„åº•å±‚æ•°ç»„ï¼Œæœ‰æ—¶ä¸ä¼š
    - å¦‚æœ cap è¶³å¤Ÿï¼šå¤ç”¨åŸæ•°ç»„
    - å¦‚æœ cap ä¸å¤Ÿï¼šåˆ†é…æ–°æ•°ç»„ï¼ˆä¸åŸåˆ‡ç‰‡è„±ç¦»å…³ç³»ï¼‰

```go
s1 := []int{1, 2, 3}
s2 := append(s1, 4)
```
- è‹¥ cap(s1) è¶³å¤Ÿï¼Œs1 å’Œ s2 å…±äº«åº•å±‚æ•°ç»„ï¼›å¦åˆ™ s2 æŒ‡å‘æ–°æ•°ç»„

---

## åä¸€ã€å®éªŒï¼šæ‰©å®¹è§„å¾‹ç¤ºä¾‹

```go
s := []int{}
for i := 0; i < 20; i++ {
    s = append(s, i)
    fmt.Printf("len=%d cap=%d\n", len(s), cap(s))
}
```

è¾“å‡ºç±»ä¼¼ï¼š

```
len=1 cap=1
len=2 cap=2
len=3 cap=4
len=5 cap=8
len=9 cap=16
len=17 cap=32
```
- å°äº 1024 æ—¶ä¸ºç¿»å€å¢é•¿

---

## ğŸ§¾ æ€»ç»“ï¼šåˆ‡ç‰‡å­¦ä¹ é‡ç‚¹

| æ“ä½œ   | è¯­æ³•                                      | è¯´æ˜                 |
|--------|-------------------------------------------|----------------------|
| å®šä¹‰åˆ‡ç‰‡ | s := []int{}                             | ç©ºåˆ‡ç‰‡               |
| ä½¿ç”¨ make | make([]T, len, cap)                    | æŒ‡å®šé•¿åº¦ä¸å®¹é‡       |
| ä»æ•°ç»„åˆ›å»º | a[low:high]                            | æˆªå–èŒƒå›´ [low, high) |
| æ’å…¥     | append(s[:i], append([]T{x}, s[i:]...)...) | æ’å…¥å…ƒç´              |
| åˆ é™¤     | append(s[:i], s[i+1:]...)               | åˆ é™¤å…ƒç´              |
| æ‹·è´     | copy(dst, src)                          | æ‹·è´æœ€å°é•¿åº¦å…ƒç´      |
| nil vs ç©ºåˆ‡ç‰‡ | nilSlice == nil                     | ç©ºåˆ‡ç‰‡ä¸ä¸º nil       |
| æ‰©å®¹     | è‡ªåŠ¨ç¿»å€æˆ–+25%                           | è¶…å‡ºå®¹é‡è‡ªåŠ¨åˆ†é…æ–°æ•°ç»„ |

---